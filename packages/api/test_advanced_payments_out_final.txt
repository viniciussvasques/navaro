Using selector: EpollSelector
Using selector: EpollSelector
[2m2026-02-05T14:50:10.594860Z[0m [[32m[1minfo     [0m] [1mStarting application          [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mname[0m=[35m'Navaro API'[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:10,652 INFO sqlalchemy.engine.Engine select pg_catalog.version()
select pg_catalog.version()
2026-02-05 15:50:10,653 INFO sqlalchemy.engine.Engine [raw sql] ()
[raw sql] ()
2026-02-05 15:50:10,658 INFO sqlalchemy.engine.Engine select current_schema()
select current_schema()
2026-02-05 15:50:10,659 INFO sqlalchemy.engine.Engine [raw sql] ()
[raw sql] ()
2026-02-05 15:50:10,667 INFO sqlalchemy.engine.Engine show standard_conforming_strings
show standard_conforming_strings
2026-02-05 15:50:10,667 INFO sqlalchemy.engine.Engine [raw sql] ()
[raw sql] ()
2026-02-05 15:50:10,673 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:10,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,681 INFO sqlalchemy.engine.Engine [generated in 0.00057s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[generated in 0.00057s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,701 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,701 INFO sqlalchemy.engine.Engine [cached since 0.02094s ago] ('establishments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.02094s ago] ('establishments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,705 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,706 INFO sqlalchemy.engine.Engine [cached since 0.02573s ago] ('service_staff', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.02573s ago] ('service_staff', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,709 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,710 INFO sqlalchemy.engine.Engine [cached since 0.02968s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.02968s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,714 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,715 INFO sqlalchemy.engine.Engine [cached since 0.03461s ago] ('service_bundles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.03461s ago] ('service_bundles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,719 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,719 INFO sqlalchemy.engine.Engine [cached since 0.03931s ago] ('service_bundle_items', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.03931s ago] ('service_bundle_items', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,725 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,726 INFO sqlalchemy.engine.Engine [cached since 0.0459s ago] ('staff_members', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.0459s ago] ('staff_members', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,728 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,729 INFO sqlalchemy.engine.Engine [cached since 0.04879s ago] ('staff_blocks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.04879s ago] ('staff_blocks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,740 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,740 INFO sqlalchemy.engine.Engine [cached since 0.06022s ago] ('subscription_plans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.06022s ago] ('subscription_plans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,743 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,745 INFO sqlalchemy.engine.Engine [cached since 0.06378s ago] ('subscription_plan_items', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.06378s ago] ('subscription_plan_items', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,748 INFO sqlalchemy.engine.Engine [cached since 0.06808s ago] ('subscriptions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.06808s ago] ('subscriptions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,751 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,751 INFO sqlalchemy.engine.Engine [cached since 0.07123s ago] ('subscription_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.07123s ago] ('subscription_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,754 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,755 INFO sqlalchemy.engine.Engine [cached since 0.07461s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.07461s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,757 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,757 INFO sqlalchemy.engine.Engine [cached since 0.07676s ago] ('appointment_products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.07676s ago] ('appointment_products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,759 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,760 INFO sqlalchemy.engine.Engine [cached since 0.07989s ago] ('checkins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.07989s ago] ('checkins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,762 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,762 INFO sqlalchemy.engine.Engine [cached since 0.0821s ago] ('queue_entries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.0821s ago] ('queue_entries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,764 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,764 INFO sqlalchemy.engine.Engine [cached since 0.08376s ago] ('reviews', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.08376s ago] ('reviews', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,765 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,766 INFO sqlalchemy.engine.Engine [cached since 0.08562s ago] ('favorites', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.08562s ago] ('favorites', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,769 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,769 INFO sqlalchemy.engine.Engine [cached since 0.08947s ago] ('favorite_staff', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.08947s ago] ('favorite_staff', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,773 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,773 INFO sqlalchemy.engine.Engine [cached since 0.09331s ago] ('payments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.09331s ago] ('payments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,777 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,778 INFO sqlalchemy.engine.Engine [cached since 0.09765s ago] ('tips', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.09765s ago] ('tips', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,781 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,781 INFO sqlalchemy.engine.Engine [cached since 0.1013s ago] ('payouts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1013s ago] ('payouts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,783 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,784 INFO sqlalchemy.engine.Engine [cached since 0.1037s ago] ('portfolio_images', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1037s ago] ('portfolio_images', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,792 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,792 INFO sqlalchemy.engine.Engine [cached since 0.1119s ago] ('search_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1119s ago] ('search_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,795 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,796 INFO sqlalchemy.engine.Engine [cached since 0.1156s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1156s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,798 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,798 INFO sqlalchemy.engine.Engine [cached since 0.1184s ago] ('establishment_plugins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1184s ago] ('establishment_plugins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,800 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,801 INFO sqlalchemy.engine.Engine [cached since 0.1205s ago] ('ad_campaigns', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1205s ago] ('ad_campaigns', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,802 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,802 INFO sqlalchemy.engine.Engine [cached since 0.1224s ago] ('notifications', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1224s ago] ('notifications', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,805 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,806 INFO sqlalchemy.engine.Engine [cached since 0.1256s ago] ('user_debts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.1256s ago] ('user_debts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,809 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,809 INFO sqlalchemy.engine.Engine [cached since 0.129s ago] ('user_wallets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.129s ago] ('user_wallets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-05 15:50:10,812 INFO sqlalchemy.engine.Engine [cached since 0.132s ago] ('wallet_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
[cached since 0.132s ago] ('wallet_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-05 15:50:10,818 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,818 INFO sqlalchemy.engine.Engine [generated in 0.00052s] ('userrole', 'pg_catalog')
[generated in 0.00052s] ('userrole', 'pg_catalog')
2026-02-05 15:50:10,825 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,825 INFO sqlalchemy.engine.Engine [cached since 0.007396s ago] ('establishmentcategory', 'pg_catalog')
[cached since 0.007396s ago] ('establishmentcategory', 'pg_catalog')
2026-02-05 15:50:10,831 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,831 INFO sqlalchemy.engine.Engine [cached since 0.01305s ago] ('establishmentstatus', 'pg_catalog')
[cached since 0.01305s ago] ('establishmentstatus', 'pg_catalog')
2026-02-05 15:50:10,836 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,836 INFO sqlalchemy.engine.Engine [cached since 0.01802s ago] ('subscriptiontier', 'pg_catalog')
[cached since 0.01802s ago] ('subscriptiontier', 'pg_catalog')
2026-02-05 15:50:10,841 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,841 INFO sqlalchemy.engine.Engine [cached since 0.02338s ago] ('subscriptionstatus', 'pg_catalog')
[cached since 0.02338s ago] ('subscriptionstatus', 'pg_catalog')
2026-02-05 15:50:10,844 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,844 INFO sqlalchemy.engine.Engine [cached since 0.02641s ago] ('appointmentstatus', 'pg_catalog')
[cached since 0.02641s ago] ('appointmentstatus', 'pg_catalog')
2026-02-05 15:50:10,847 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,847 INFO sqlalchemy.engine.Engine [cached since 0.02919s ago] ('paymenttype', 'pg_catalog')
[cached since 0.02919s ago] ('paymenttype', 'pg_catalog')
2026-02-05 15:50:10,850 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,850 INFO sqlalchemy.engine.Engine [cached since 0.03242s ago] ('queuestatus', 'pg_catalog')
[cached since 0.03242s ago] ('queuestatus', 'pg_catalog')
2026-02-05 15:50:10,854 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,855 INFO sqlalchemy.engine.Engine [cached since 0.0364s ago] ('paymentpurpose', 'pg_catalog')
[cached since 0.0364s ago] ('paymentpurpose', 'pg_catalog')
2026-02-05 15:50:10,858 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,859 INFO sqlalchemy.engine.Engine [cached since 0.04068s ago] ('paymentstatus', 'pg_catalog')
[cached since 0.04068s ago] ('paymentstatus', 'pg_catalog')
2026-02-05 15:50:10,861 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,861 INFO sqlalchemy.engine.Engine [cached since 0.04316s ago] ('notificationtype', 'pg_catalog')
[cached since 0.04316s ago] ('notificationtype', 'pg_catalog')
2026-02-05 15:50:10,863 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,863 INFO sqlalchemy.engine.Engine [cached since 0.04507s ago] ('debtstatus', 'pg_catalog')
[cached since 0.04507s ago] ('debtstatus', 'pg_catalog')
2026-02-05 15:50:10,865 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,866 INFO sqlalchemy.engine.Engine [cached since 0.04761s ago] ('transactiontype', 'pg_catalog')
[cached since 0.04761s ago] ('transactiontype', 'pg_catalog')
2026-02-05 15:50:10,868 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-05 15:50:10,868 INFO sqlalchemy.engine.Engine [cached since 0.04978s ago] ('transactionstatus', 'pg_catalog')
[cached since 0.04978s ago] ('transactionstatus', 'pg_catalog')
2026-02-05 15:50:10,870 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
[2m2026-02-05T14:50:10.871646Z[0m [[32m[1minfo     [0m] [1mDatabase initialized          [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mversion[0m=[35m1.0.0[0m
[2m2026-02-05T14:50:10.878376Z[0m [[32m[1minfo     [0m] [1mVerification code sent        [0m [[0m[1m[34mapp.api.v1.auth[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/send-code[0m [36mphone[0m=[35m+5511988887777[0m [36mrequest_id[0m=[35m65d15358-a02f-4c5c-8789-eab6c1a9d3ed[0m [36mversion[0m=[35m1.0.0[0m
[2m2026-02-05T14:50:10.879278Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m4.85[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/send-code[0m [36mrequest_id[0m=[35m65d15358-a02f-4c5c-8789-eab6c1a9d3ed[0m [36mstatus_code[0m=[35m200[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:10,891 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,053 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.phone = $1::VARCHAR
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.phone = $1::VARCHAR
2026-02-05 15:50:11,053 INFO sqlalchemy.engine.Engine [generated in 0.00065s] ('+5511988887777',)
[generated in 0.00065s] ('+5511988887777',)
[2m2026-02-05T14:50:11.106452Z[0m [[32m[1minfo     [0m] [1mUser authenticated            [0m [[0m[1m[34mapp.api.v1.auth[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/verify[0m [36mrequest_id[0m=[35mba1c10e4-f9f1-410c-a65b-2dd1b0eacebe[0m [36muser_id[0m=[35m1bec427c-d8f4-47f8-963a-f2dcba2a6133[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,107 INFO sqlalchemy.engine.Engine ROLLBACK
ROLLBACK
[2m2026-02-05T14:50:11.108005Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m226.41[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/verify[0m [36mrequest_id[0m=[35mba1c10e4-f9f1-410c-a65b-2dd1b0eacebe[0m [36mstatus_code[0m=[35m200[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,118 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,120 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-05 15:50:11,121 INFO sqlalchemy.engine.Engine [generated in 0.00069s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
[generated in 0.00069s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
2026-02-05 15:50:11,133 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,134 INFO sqlalchemy.engine.Engine [generated in 0.00068s] ('advanced-barbershop',)
[generated in 0.00068s] ('advanced-barbershop',)
2026-02-05 15:50:11,164 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,164 INFO sqlalchemy.engine.Engine [cached since 0.0309s ago] ('advanced-barbershop-1',)
[cached since 0.0309s ago] ('advanced-barbershop-1',)
2026-02-05 15:50:11,166 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,166 INFO sqlalchemy.engine.Engine [cached since 0.03308s ago] ('advanced-barbershop-2',)
[cached since 0.03308s ago] ('advanced-barbershop-2',)
2026-02-05 15:50:11,168 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,168 INFO sqlalchemy.engine.Engine [cached since 0.03495s ago] ('advanced-barbershop-3',)
[cached since 0.03495s ago] ('advanced-barbershop-3',)
2026-02-05 15:50:11,170 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,170 INFO sqlalchemy.engine.Engine [cached since 0.03663s ago] ('advanced-barbershop-4',)
[cached since 0.03663s ago] ('advanced-barbershop-4',)
2026-02-05 15:50:11,173 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,174 INFO sqlalchemy.engine.Engine [cached since 0.04054s ago] ('advanced-barbershop-5',)
[cached since 0.04054s ago] ('advanced-barbershop-5',)
2026-02-05 15:50:11,177 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,177 INFO sqlalchemy.engine.Engine [cached since 0.04418s ago] ('advanced-barbershop-6',)
[cached since 0.04418s ago] ('advanced-barbershop-6',)
2026-02-05 15:50:11,180 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
2026-02-05 15:50:11,180 INFO sqlalchemy.engine.Engine [cached since 0.04659s ago] ('advanced-barbershop-7',)
[cached since 0.04659s ago] ('advanced-barbershop-7',)
2026-02-05 15:50:11,189 INFO sqlalchemy.engine.Engine INSERT INTO establishments (owner_id, name, slug, category, description, address, city, state, zip_code, latitude, longitude, phone, whatsapp, logo_url, cover_url, google_place_id, google_maps_url, business_hours, queue_mode_enabled, status, subscription_tier, stripe_account_id, cancellation_fee_fixed, no_show_fee_percent, deposit_percent, id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::establishmentcategory, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::NUMERIC(10, 8), $11::NUMERIC(11, 8), $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::JSON, $19::BOOLEAN, $20::establishmentstatus, $21::subscriptiontier, $22::VARCHAR, $23::NUMERIC(10, 2), $24::NUMERIC(5, 2), $25::NUMERIC(5, 2), $26::UUID) RETURNING establishments.created_at, establishments.updated_at
INSERT INTO establishments (owner_id, name, slug, category, description, address, city, state, zip_code, latitude, longitude, phone, whatsapp, logo_url, cover_url, google_place_id, google_maps_url, business_hours, queue_mode_enabled, status, subscription_tier, stripe_account_id, cancellation_fee_fixed, no_show_fee_percent, deposit_percent, id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::establishmentcategory, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::NUMERIC(10, 8), $11::NUMERIC(11, 8), $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::JSON, $19::BOOLEAN, $20::establishmentstatus, $21::subscriptiontier, $22::VARCHAR, $23::NUMERIC(10, 2), $24::NUMERIC(5, 2), $25::NUMERIC(5, 2), $26::UUID) RETURNING establishments.created_at, establishments.updated_at
2026-02-05 15:50:11,189 INFO sqlalchemy.engine.Engine [generated in 0.00099s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), 'Advanced Barbershop', 'advanced-barbershop-7', 'barbershop', None, 'Feature St', 'São Paulo', 'SP', None, None, None, '+551177777777', None, None, None, None, None, '{"mon": {"open": "00:00", "close": "23:59"}, "tue": {"open": "00:00", "close": "23:59"}, "wed": {"open": "00:00", "close": "23:59"}, "thu": {"open":  ... (10 characters truncated) ... close": "23:59"}, "fri": {"open": "00:00", "close": "23:59"}, "sat": {"open": "00:00", "close": "23:59"}, "sun": {"open": "00:00", "close": "23:59"}}', False, 'pending', 'trial', None, 0.0, 50.0, 0.0, UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'))
[generated in 0.00099s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), 'Advanced Barbershop', 'advanced-barbershop-7', 'barbershop', None, 'Feature St', 'São Paulo', 'SP', None, None, None, '+551177777777', None, None, None, None, None, '{"mon": {"open": "00:00", "close": "23:59"}, "tue": {"open": "00:00", "close": "23:59"}, "wed": {"open": "00:00", "close": "23:59"}, "thu": {"open":  ... (10 characters truncated) ... close": "23:59"}, "fri": {"open": "00:00", "close": "23:59"}, "sat": {"open": "00:00", "close": "23:59"}, "sun": {"open": "00:00", "close": "23:59"}}', False, 'pending', 'trial', None, 0.0, 50.0, 0.0, UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'))
2026-02-05 15:50:11,197 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
2026-02-05 15:50:11,206 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,210 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
2026-02-05 15:50:11,210 INFO sqlalchemy.engine.Engine [generated in 0.00045s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
[generated in 0.00045s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
2026-02-05 15:50:11,219 INFO sqlalchemy.engine.Engine ROLLBACK
ROLLBACK
[2m2026-02-05T14:50:11.220875Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m108.74[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/establishments[0m [36mrequest_id[0m=[35m963907d4-ce86-4982-a4a7-4f6c84f4a777[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,233 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,234 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-05 15:50:11,234 INFO sqlalchemy.engine.Engine [cached since 0.1138s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
[cached since 0.1138s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
2026-02-05 15:50:11,247 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
2026-02-05 15:50:11,247 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
[generated in 0.00053s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
2026-02-05 15:50:11,253 INFO sqlalchemy.engine.Engine INSERT INTO staff_members (establishment_id, user_id, name, phone, role, avatar_url, work_schedule, commission_rate, active, id) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON, $8::NUMERIC(5, 2), $9::BOOLEAN, $10::UUID) RETURNING staff_members.created_at, staff_members.updated_at
INSERT INTO staff_members (establishment_id, user_id, name, phone, role, avatar_url, work_schedule, commission_rate, active, id) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON, $8::NUMERIC(5, 2), $9::BOOLEAN, $10::UUID) RETURNING staff_members.created_at, staff_members.updated_at
2026-02-05 15:50:11,253 INFO sqlalchemy.engine.Engine [generated in 0.00050s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), None, 'Expert Barber', None, 'barber', None, '{"mon": {"open": "00:00", "close": "23:59"}, "tue": {"open": "00:00", "close": "23:59"}, "wed": {"open": "00:00", "close": "23:59"}, "thu": {"open":  ... (10 characters truncated) ... close": "23:59"}, "fri": {"open": "00:00", "close": "23:59"}, "sat": {"open": "00:00", "close": "23:59"}, "sun": {"open": "00:00", "close": "23:59"}}', None, True, UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'))
[generated in 0.00050s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), None, 'Expert Barber', None, 'barber', None, '{"mon": {"open": "00:00", "close": "23:59"}, "tue": {"open": "00:00", "close": "23:59"}, "wed": {"open": "00:00", "close": "23:59"}, "thu": {"open":  ... (10 characters truncated) ... close": "23:59"}, "fri": {"open": "00:00", "close": "23:59"}, "sat": {"open": "00:00", "close": "23:59"}, "sun": {"open": "00:00", "close": "23:59"}}', None, True, UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'))
2026-02-05 15:50:11,257 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
2026-02-05 15:50:11,262 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,427 INFO sqlalchemy.engine.Engine SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
2026-02-05 15:50:11,428 INFO sqlalchemy.engine.Engine [generated in 0.00057s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
[generated in 0.00057s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
2026-02-05 15:50:11,434 INFO sqlalchemy.engine.Engine ROLLBACK
ROLLBACK
[2m2026-02-05T14:50:11.435645Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m211.58[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/establishments/540e0c78-4591-4cdd-a5f0-215309dbe505/staff[0m [36mrequest_id[0m=[35mfd3fe682-0e92-4a9c-947e-addb82c3a341[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,445 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,446 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-05 15:50:11,446 INFO sqlalchemy.engine.Engine [cached since 0.326s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
[cached since 0.326s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
2026-02-05 15:50:11,451 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
2026-02-05 15:50:11,451 INFO sqlalchemy.engine.Engine [cached since 0.2045s ago] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
[cached since 0.2045s ago] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
2026-02-05 15:50:11,456 INFO sqlalchemy.engine.Engine INSERT INTO services (establishment_id, name, description, price, duration_minutes, active, sort_order, deposit_required, id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::NUMERIC(10, 2), $5::INTEGER, $6::BOOLEAN, $7::INTEGER, $8::BOOLEAN, $9::UUID) RETURNING services.created_at, services.updated_at
INSERT INTO services (establishment_id, name, description, price, duration_minutes, active, sort_order, deposit_required, id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::NUMERIC(10, 2), $5::INTEGER, $6::BOOLEAN, $7::INTEGER, $8::BOOLEAN, $9::UUID) RETURNING services.created_at, services.updated_at
2026-02-05 15:50:11,456 INFO sqlalchemy.engine.Engine [generated in 0.00072s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), 'Luxury Cut', None, 100.0, 60, True, 0, True, UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'))
[generated in 0.00072s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), 'Luxury Cut', None, 100.0, 60, True, 0, True, UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'))
2026-02-05 15:50:11,461 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
2026-02-05 15:50:11,469 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,471 INFO sqlalchemy.engine.Engine SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
2026-02-05 15:50:11,472 INFO sqlalchemy.engine.Engine [generated in 0.00048s] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
[generated in 0.00048s] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
2026-02-05 15:50:11,478 INFO sqlalchemy.engine.Engine ROLLBACK
ROLLBACK
[2m2026-02-05T14:50:11.479189Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m40.03[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/establishments/540e0c78-4591-4cdd-a5f0-215309dbe505/services[0m [36mrequest_id[0m=[35m3216fb28-e46f-403e-8fd0-1d75e59038f3[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,543 INFO sqlalchemy.engine.Engine select pg_catalog.version()
select pg_catalog.version()
2026-02-05 15:50:11,543 INFO sqlalchemy.engine.Engine [raw sql] ()
[raw sql] ()
2026-02-05 15:50:11,549 INFO sqlalchemy.engine.Engine select current_schema()
select current_schema()
2026-02-05 15:50:11,550 INFO sqlalchemy.engine.Engine [raw sql] ()
[raw sql] ()
2026-02-05 15:50:11,554 INFO sqlalchemy.engine.Engine show standard_conforming_strings
show standard_conforming_strings
2026-02-05 15:50:11,555 INFO sqlalchemy.engine.Engine [raw sql] ()
[raw sql] ()
2026-02-05 15:50:11,558 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,561 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-05 15:50:11,561 INFO sqlalchemy.engine.Engine [generated in 0.00039s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
[generated in 0.00039s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
2026-02-05 15:50:11,615 INFO sqlalchemy.engine.Engine SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
2026-02-05 15:50:11,616 INFO sqlalchemy.engine.Engine [generated in 0.00047s] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
[generated in 0.00047s] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
2026-02-05 15:50:11,623 INFO sqlalchemy.engine.Engine SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
2026-02-05 15:50:11,624 INFO sqlalchemy.engine.Engine [generated in 0.00089s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
[generated in 0.00089s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
2026-02-05 15:50:11,632 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
2026-02-05 15:50:11,632 INFO sqlalchemy.engine.Engine [generated in 0.00036s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
[generated in 0.00036s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
2026-02-05 15:50:11,658 INFO sqlalchemy.engine.Engine SELECT staff_blocks.staff_id, staff_blocks.start_at, staff_blocks.end_at, staff_blocks.reason, staff_blocks.id, staff_blocks.created_at, staff_blocks.updated_at 
FROM staff_blocks 
WHERE staff_blocks.staff_id = $1::UUID AND staff_blocks.start_at < $2::TIMESTAMP WITH TIME ZONE AND staff_blocks.end_at > $3::TIMESTAMP WITH TIME ZONE
SELECT staff_blocks.staff_id, staff_blocks.start_at, staff_blocks.end_at, staff_blocks.reason, staff_blocks.id, staff_blocks.created_at, staff_blocks.updated_at 
FROM staff_blocks 
WHERE staff_blocks.staff_id = $1::UUID AND staff_blocks.start_at < $2::TIMESTAMP WITH TIME ZONE AND staff_blocks.end_at > $3::TIMESTAMP WITH TIME ZONE
2026-02-05 15:50:11,658 INFO sqlalchemy.engine.Engine [generated in 0.00045s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), datetime.datetime(2026, 2, 7, 16, 50, 11, 481585), datetime.datetime(2026, 2, 7, 15, 50, 11, 481585))
[generated in 0.00045s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), datetime.datetime(2026, 2, 7, 16, 50, 11, 481585), datetime.datetime(2026, 2, 7, 15, 50, 11, 481585))
2026-02-05 15:50:11,669 INFO sqlalchemy.engine.Engine SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.staff_id = $1::UUID AND appointments.status != $2::appointmentstatus AND appointments.scheduled_at < $3::TIMESTAMP WITH TIME ZONE
SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.staff_id = $1::UUID AND appointments.status != $2::appointmentstatus AND appointments.scheduled_at < $3::TIMESTAMP WITH TIME ZONE
2026-02-05 15:50:11,670 INFO sqlalchemy.engine.Engine [generated in 0.00062s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), 'cancelled', datetime.datetime(2026, 2, 7, 16, 50, 11, 481585))
[generated in 0.00062s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), 'cancelled', datetime.datetime(2026, 2, 7, 16, 50, 11, 481585))
2026-02-05 15:50:11,700 INFO sqlalchemy.engine.Engine INSERT INTO appointments (user_id, establishment_id, staff_id, service_id, bundle_id, subscription_id, scheduled_at, duration_minutes, status, payment_type, notes, cancel_reason, total_price, id) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::UUID, $7::TIMESTAMP WITH TIME ZONE, $8::INTEGER, $9::appointmentstatus, $10::paymenttype, $11::VARCHAR, $12::VARCHAR, $13::NUMERIC(10, 2), $14::UUID) RETURNING appointments.created_at, appointments.updated_at
INSERT INTO appointments (user_id, establishment_id, staff_id, service_id, bundle_id, subscription_id, scheduled_at, duration_minutes, status, payment_type, notes, cancel_reason, total_price, id) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::UUID, $7::TIMESTAMP WITH TIME ZONE, $8::INTEGER, $9::appointmentstatus, $10::paymenttype, $11::VARCHAR, $12::VARCHAR, $13::NUMERIC(10, 2), $14::UUID) RETURNING appointments.created_at, appointments.updated_at
2026-02-05 15:50:11,701 INFO sqlalchemy.engine.Engine [generated in 0.00059s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'), None, None, datetime.datetime(2026, 2, 7, 15, 50, 11, 481585), 60, 'awaiting_deposit', 'single', None, None, 100.0, UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'))
[generated in 0.00059s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'), None, None, datetime.datetime(2026, 2, 7, 15, 50, 11, 481585), 60, 'awaiting_deposit', 'single', None, None, 100.0, UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'))
2026-02-05 15:50:11,710 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
2026-02-05 15:50:11,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,724 INFO sqlalchemy.engine.Engine SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.id = $1::UUID
SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.id = $1::UUID
2026-02-05 15:50:11,724 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
[generated in 0.00055s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
2026-02-05 15:50:11,735 INFO sqlalchemy.engine.Engine SELECT appointment_products.appointment_id AS appointment_products_appointment_id, appointment_products.product_id AS appointment_products_product_id, appointment_products.quantity AS appointment_products_quantity, appointment_products.unit_price AS appointment_products_unit_price, appointment_products.id AS appointment_products_id, appointment_products.created_at AS appointment_products_created_at, appointment_products.updated_at AS appointment_products_updated_at 
FROM appointment_products 
WHERE appointment_products.appointment_id IN ($1::UUID)
SELECT appointment_products.appointment_id AS appointment_products_appointment_id, appointment_products.product_id AS appointment_products_product_id, appointment_products.quantity AS appointment_products_quantity, appointment_products.unit_price AS appointment_products_unit_price, appointment_products.id AS appointment_products_id, appointment_products.created_at AS appointment_products_created_at, appointment_products.updated_at AS appointment_products_updated_at 
FROM appointment_products 
WHERE appointment_products.appointment_id IN ($1::UUID)
2026-02-05 15:50:11,735 INFO sqlalchemy.engine.Engine [generated in 0.00108s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
[generated in 0.00108s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
2026-02-05 15:50:11,746 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
[2m2026-02-05T14:50:11.747710Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m265.43[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments[0m [36mrequest_id[0m=[35m52ced521-9c7c-408a-9f1a-b88b7dda5faa[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,756 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,757 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-05 15:50:11,757 INFO sqlalchemy.engine.Engine [cached since 0.1969s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
[cached since 0.1969s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
2026-02-05 15:50:11,765 INFO sqlalchemy.engine.Engine SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.id = $1::UUID
SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.id = $1::UUID
2026-02-05 15:50:11,766 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
[generated in 0.00053s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
2026-02-05 15:50:11,772 INFO sqlalchemy.engine.Engine SELECT establishments.id AS establishments_id, establishments.owner_id AS establishments_owner_id, establishments.name AS establishments_name, establishments.slug AS establishments_slug, establishments.category AS establishments_category, establishments.description AS establishments_description, establishments.address AS establishments_address, establishments.city AS establishments_city, establishments.state AS establishments_state, establishments.zip_code AS establishments_zip_code, establishments.latitude AS establishments_latitude, establishments.longitude AS establishments_longitude, establishments.phone AS establishments_phone, establishments.whatsapp AS establishments_whatsapp, establishments.logo_url AS establishments_logo_url, establishments.cover_url AS establishments_cover_url, establishments.google_place_id AS establishments_google_place_id, establishments.google_maps_url AS establishments_google_maps_url, establishments.business_hours AS establishments_business_hours, establishments.queue_mode_enabled AS establishments_queue_mode_enabled, establishments.status AS establishments_status, establishments.subscription_tier AS establishments_subscription_tier, establishments.stripe_account_id AS establishments_stripe_account_id, establishments.cancellation_fee_fixed AS establishments_cancellation_fee_fixed, establishments.no_show_fee_percent AS establishments_no_show_fee_percent, establishments.deposit_percent AS establishments_deposit_percent, establishments.created_at AS establishments_created_at, establishments.updated_at AS establishments_updated_at 
FROM establishments 
WHERE establishments.id IN ($1::UUID)
SELECT establishments.id AS establishments_id, establishments.owner_id AS establishments_owner_id, establishments.name AS establishments_name, establishments.slug AS establishments_slug, establishments.category AS establishments_category, establishments.description AS establishments_description, establishments.address AS establishments_address, establishments.city AS establishments_city, establishments.state AS establishments_state, establishments.zip_code AS establishments_zip_code, establishments.latitude AS establishments_latitude, establishments.longitude AS establishments_longitude, establishments.phone AS establishments_phone, establishments.whatsapp AS establishments_whatsapp, establishments.logo_url AS establishments_logo_url, establishments.cover_url AS establishments_cover_url, establishments.google_place_id AS establishments_google_place_id, establishments.google_maps_url AS establishments_google_maps_url, establishments.business_hours AS establishments_business_hours, establishments.queue_mode_enabled AS establishments_queue_mode_enabled, establishments.status AS establishments_status, establishments.subscription_tier AS establishments_subscription_tier, establishments.stripe_account_id AS establishments_stripe_account_id, establishments.cancellation_fee_fixed AS establishments_cancellation_fee_fixed, establishments.no_show_fee_percent AS establishments_no_show_fee_percent, establishments.deposit_percent AS establishments_deposit_percent, establishments.created_at AS establishments_created_at, establishments.updated_at AS establishments_updated_at 
FROM establishments 
WHERE establishments.id IN ($1::UUID)
2026-02-05 15:50:11,772 INFO sqlalchemy.engine.Engine [generated in 0.00063s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
[generated in 0.00063s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
2026-02-05 15:50:11,779 INFO sqlalchemy.engine.Engine UPDATE appointments SET status=$1::appointmentstatus, updated_at=now() WHERE appointments.id = $2::UUID
UPDATE appointments SET status=$1::appointmentstatus, updated_at=now() WHERE appointments.id = $2::UUID
2026-02-05 15:50:11,780 INFO sqlalchemy.engine.Engine [generated in 0.00046s] ('no_show', UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'))
[generated in 0.00046s] ('no_show', UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'))
2026-02-05 15:50:11,788 INFO sqlalchemy.engine.Engine INSERT INTO user_debts (user_id, establishment_id, appointment_id, amount, status, id) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::NUMERIC(10, 2), $5::debtstatus, $6::UUID) RETURNING user_debts.created_at, user_debts.updated_at
INSERT INTO user_debts (user_id, establishment_id, appointment_id, amount, status, id) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::NUMERIC(10, 2), $5::debtstatus, $6::UUID) RETURNING user_debts.created_at, user_debts.updated_at
2026-02-05 15:50:11,789 INFO sqlalchemy.engine.Engine [generated in 0.00057s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'), 50.0, 'pending', UUID('5cdf44aa-177a-4fcb-ada4-bb766b6b04e5'))
[generated in 0.00057s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'), 50.0, 'pending', UUID('5cdf44aa-177a-4fcb-ada4-bb766b6b04e5'))
2026-02-05 15:50:11,809 INFO sqlalchemy.engine.Engine COMMIT
COMMIT
[2m2026-02-05T14:50:11.814164Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m62.94[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments/b3adb854-ce8a-41f3-b3b2-83facdd15159/no-show[0m [36mrequest_id[0m=[35m8adbd3ee-06a2-414b-963a-42a4337a2d10[0m [36mstatus_code[0m=[35m200[0m [36mversion[0m=[35m1.0.0[0m
2026-02-05 15:50:11,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
BEGIN (implicit)
2026-02-05 15:50:11,825 INFO sqlalchemy.engine.Engine SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-05 15:50:11,825 INFO sqlalchemy.engine.Engine [cached since 0.265s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
[cached since 0.265s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
2026-02-05 15:50:11,830 INFO sqlalchemy.engine.Engine SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
2026-02-05 15:50:11,831 INFO sqlalchemy.engine.Engine [cached since 0.2154s ago] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
[cached since 0.2154s ago] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
2026-02-05 15:50:11,840 INFO sqlalchemy.engine.Engine SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
2026-02-05 15:50:11,840 INFO sqlalchemy.engine.Engine [cached since 0.2174s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
[cached since 0.2174s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
2026-02-05 15:50:11,843 INFO sqlalchemy.engine.Engine SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
2026-02-05 15:50:11,843 INFO sqlalchemy.engine.Engine [cached since 0.2112s ago] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
[cached since 0.2112s ago] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
2026-02-05 15:50:11,847 INFO sqlalchemy.engine.Engine SELECT staff_blocks.staff_id, staff_blocks.start_at, staff_blocks.end_at, staff_blocks.reason, staff_blocks.id, staff_blocks.created_at, staff_blocks.updated_at 
FROM staff_blocks 
WHERE staff_blocks.staff_id = $1::UUID AND staff_blocks.start_at < $2::TIMESTAMP WITH TIME ZONE AND staff_blocks.end_at > $3::TIMESTAMP WITH TIME ZONE
SELECT staff_blocks.staff_id, staff_blocks.start_at, staff_blocks.end_at, staff_blocks.reason, staff_blocks.id, staff_blocks.created_at, staff_blocks.updated_at 
FROM staff_blocks 
WHERE staff_blocks.staff_id = $1::UUID AND staff_blocks.start_at < $2::TIMESTAMP WITH TIME ZONE AND staff_blocks.end_at > $3::TIMESTAMP WITH TIME ZONE
2026-02-05 15:50:11,848 INFO sqlalchemy.engine.Engine [cached since 0.1899s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), datetime.datetime(2026, 2, 8, 16, 50, 11, 816464), datetime.datetime(2026, 2, 8, 15, 50, 11, 816464))
[cached since 0.1899s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), datetime.datetime(2026, 2, 8, 16, 50, 11, 816464), datetime.datetime(2026, 2, 8, 15, 50, 11, 816464))
2026-02-05 15:50:11,852 INFO sqlalchemy.engine.Engine SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.staff_id = $1::UUID AND appointments.status != $2::appointmentstatus AND appointments.scheduled_at < $3::TIMESTAMP WITH TIME ZONE
SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.staff_id = $1::UUID AND appointments.status != $2::appointmentstatus AND appointments.scheduled_at < $3::TIMESTAMP WITH TIME ZONE
2026-02-05 15:50:11,853 INFO sqlalchemy.engine.Engine [cached since 0.1835s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), 'cancelled', datetime.datetime(2026, 2, 8, 16, 50, 11, 816464))
[cached since 0.1835s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), 'cancelled', datetime.datetime(2026, 2, 8, 16, 50, 11, 816464))
2026-02-05 15:50:11,857 INFO sqlalchemy.engine.Engine ROLLBACK
ROLLBACK
[2m2026-02-05T14:50:11.860122Z[0m [[31m[1merror    [0m] [1mUnhandled exception           [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36merror[0m=[35m"can't compare offset-naive and offset-aware datetimes"[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments[0m [36mrequest_id[0m=[35m5cdcdb63-c98d-4d30-9975-c0f13c782abc[0m [36mversion[0m=[35m1.0.0[0m
  + Exception Group Traceback (most recent call last):
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    |     appointment = await service.create(current_user.id, data)
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    |     if c.scheduled_at < appt_end and c_end > appt_start:
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: can't compare offset-naive and offset-aware datetimes
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    appointment = await service.create(current_user.id, data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    if c.scheduled_at < appt_end and c_end > appt_start:
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can't compare offset-naive and offset-aware datetimes
  + Exception Group Traceback (most recent call last):
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    |     appointment = await service.create(current_user.id, data)
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    |     if c.scheduled_at < appt_end and c_end > appt_start:
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: can't compare offset-naive and offset-aware datetimes
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    appointment = await service.create(current_user.id, data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    if c.scheduled_at < appt_end and c_end > appt_start:
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can't compare offset-naive and offset-aware datetimes
[2m2026-02-05T14:50:11.874234Z[0m [[31m[1merror    [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m56.91[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments[0m [36mrequest_id[0m=[35m5cdcdb63-c98d-4d30-9975-c0f13c782abc[0m [36mstatus_code[0m=[35m500[0m [36mversion[0m=[35m1.0.0[0m
F[2m2026-02-05T14:50:11.991413Z[0m [[32m[1minfo     [0m] [1mShutting down application     [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mversion[0m=[35m1.0.0[0m
[2m2026-02-05T14:50:12.004241Z[0m [[32m[1minfo     [0m] [1mDatabase connections closed   [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mversion[0m=[35m1.0.0[0m

=================================== FAILURES ===================================
_________________________ test_no_show_and_wallet_flow _________________________

client = <httpx.AsyncClient object at 0x7d9903a0ed80>

    @pytest.mark.asyncio
    async def test_no_show_and_wallet_flow(client: AsyncClient):
        # ─── 1. Setup ────────────────────────────────────────────────────────────
        phone = "+5511988887777"
        resp = await client.post("/api/v1/auth/send-code", json={"phone": phone})
        code = resp.json()["message"].split(": ")[1].strip()
        resp = await client.post("/api/v1/auth/verify", json={"phone": phone, "code": code})
        token = resp.json()["tokens"]["access_token"]
        headers = {"Authorization": f"Bearer {token}"}
    
        # Create Establishment with 50% No-Show Fee
        est_resp = await client.post("/api/v1/establishments", json={
            "name": "Advanced Barbershop",
            "category": "barbershop",
            "address": "Feature St",
            "city": "São Paulo",
            "state": "SP",
            "phone": "+551177777777",
            "no_show_fee_percent": 50.0,
            "business_hours": {day: {"open": "00:00", "close": "23:59"} for day in ["mon", "tue", "wed", "thu", "fri", "sat", "sun"]}
        }, headers=headers)
        est_id = est_resp.json()["id"]
    
        # Create Staff
        staff_resp = await client.post(f"/api/v1/establishments/{est_id}/staff", json={
            "name": "Expert Barber",
            "role": "barber",
            "work_schedule": {day: {"open": "00:00", "close": "23:59"} for day in ["mon", "tue", "wed", "thu", "fri", "sat", "sun"]}
        }, headers=headers)
        staff_id = staff_resp.json()["id"]
    
        # Create Service (R$ 100,00)
        svc_resp = await client.post(f"/api/v1/establishments/{est_id}/services", json={
            "name": "Luxury Cut",
            "price": 100.0,
            "duration_minutes": 60,
            "deposit_required": True
        }, headers=headers)
        svc_id = svc_resp.json()["id"]
    
        # ─── 2. Test Deposit Requirement ─────────────────────────────────────────
        appt_resp = await client.post("/api/v1/appointments", json={
            "establishment_id": est_id,
            "service_id": svc_id,
            "staff_id": staff_id,
            "scheduled_at": (datetime.now() + timedelta(days=2)).isoformat(),
            "payment_type": "single"
        }, headers=headers)
        assert appt_resp.status_code == 201
        appointment = appt_resp.json()
        # Status should be awaiting_deposit because svc.deposit_required=True
        assert appointment["status"] == "awaiting_deposit"
        appt_id = appointment["id"]
    
        # ─── 3. Test No-Show Penalty ─────────────────────────────────────────────
        # Manually mark as no-show (we skip the checks for staff role for this test)
        no_show_resp = await client.post(f"/api/v1/appointments/{appt_id}/no-show", headers=headers)
        assert no_show_resp.status_code == 200
    
        # Check if debt was created (50% of 100.0 = 50.0)
        # Actually we can check it via a new appointment intent
        appt2_resp = await client.post("/api/v1/appointments", json={
            "establishment_id": est_id,
            "service_id": svc_id,
            "staff_id": staff_id,
            "scheduled_at": (datetime.now() + timedelta(days=3)).isoformat(),
            "payment_type": "single"
        }, headers=headers)
>       appt2_id = appt2_resp.json()["id"]
                   ^^^^^^^^^^^^^^^^^^^^^^^
E       KeyError: 'id'

tests/api/v1/test_advanced_payments.py:74: KeyError
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
INFO     app.main:main.py:28 [2m2026-02-05T14:50:10.594860Z[0m [[32m[1minfo     [0m] [1mStarting application          [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mname[0m=[35m'Navaro API'[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:1846 select pg_catalog.version()
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 select current_schema()
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 show standard_conforming_strings
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00057s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.02094s ago] ('establishments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.02573s ago] ('service_staff', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.02968s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.03461s ago] ('service_bundles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.03931s ago] ('service_bundle_items', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0459s ago] ('staff_members', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04879s ago] ('staff_blocks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.06022s ago] ('subscription_plans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.06378s ago] ('subscription_plan_items', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.06808s ago] ('subscriptions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.07123s ago] ('subscription_usage', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.07461s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.07676s ago] ('appointment_products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.07989s ago] ('checkins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0821s ago] ('queue_entries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.08376s ago] ('reviews', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.08562s ago] ('favorites', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.08947s ago] ('favorite_staff', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.09331s ago] ('payments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.09765s ago] ('tips', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1013s ago] ('payouts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1037s ago] ('portfolio_images', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1119s ago] ('search_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1156s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1184s ago] ('establishment_plugins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1205s ago] ('ad_campaigns', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1224s ago] ('notifications', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1256s ago] ('user_debts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.129s ago] ('user_wallets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.132s ago] ('wallet_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00052s] ('userrole', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.007396s ago] ('establishmentcategory', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01305s ago] ('establishmentstatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01802s ago] ('subscriptiontier', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.02338s ago] ('subscriptionstatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.02641s ago] ('appointmentstatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.02919s ago] ('paymenttype', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.03242s ago] ('queuestatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0364s ago] ('paymentpurpose', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04068s ago] ('paymentstatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04316s ago] ('notificationtype', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04507s ago] ('debtstatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04761s ago] ('transactiontype', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04978s ago] ('transactionstatus', 'pg_catalog')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     app.main:main.py:37 [2m2026-02-05T14:50:10.871646Z[0m [[32m[1minfo     [0m] [1mDatabase initialized          [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mversion[0m=[35m1.0.0[0m
------------------------------ Captured log call -------------------------------
INFO     app.api.v1.auth:auth.py:96 [2m2026-02-05T14:50:10.878376Z[0m [[32m[1minfo     [0m] [1mVerification code sent        [0m [[0m[1m[34mapp.api.v1.auth[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/send-code[0m [36mphone[0m=[35m+5511988887777[0m [36mrequest_id[0m=[35m65d15358-a02f-4c5c-8789-eab6c1a9d3ed[0m [36mversion[0m=[35m1.0.0[0m
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:10.879278Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m4.85[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/send-code[0m [36mrequest_id[0m=[35m65d15358-a02f-4c5c-8789-eab6c1a9d3ed[0m [36mstatus_code[0m=[35m200[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.phone = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00065s] ('+5511988887777',)
INFO     app.api.v1.auth:auth.py:168 [2m2026-02-05T14:50:11.106452Z[0m [[32m[1minfo     [0m] [1mUser authenticated            [0m [[0m[1m[34mapp.api.v1.auth[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/verify[0m [36mrequest_id[0m=[35mba1c10e4-f9f1-410c-a65b-2dd1b0eacebe[0m [36muser_id[0m=[35m1bec427c-d8f4-47f8-963a-f2dcba2a6133[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.108005Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m226.41[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/auth/verify[0m [36mrequest_id[0m=[35mba1c10e4-f9f1-410c-a65b-2dd1b0eacebe[0m [36mstatus_code[0m=[35m200[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00069s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00068s] ('advanced-barbershop',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0309s ago] ('advanced-barbershop-1',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.03308s ago] ('advanced-barbershop-2',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.03495s ago] ('advanced-barbershop-3',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.03663s ago] ('advanced-barbershop-4',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04054s ago] ('advanced-barbershop-5',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04418s ago] ('advanced-barbershop-6',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.slug = $1::VARCHAR
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.04659s ago] ('advanced-barbershop-7',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO establishments (owner_id, name, slug, category, description, address, city, state, zip_code, latitude, longitude, phone, whatsapp, logo_url, cover_url, google_place_id, google_maps_url, business_hours, queue_mode_enabled, status, subscription_tier, stripe_account_id, cancellation_fee_fixed, no_show_fee_percent, deposit_percent, id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::establishmentcategory, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::NUMERIC(10, 8), $11::NUMERIC(11, 8), $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::JSON, $19::BOOLEAN, $20::establishmentstatus, $21::subscriptiontier, $22::VARCHAR, $23::NUMERIC(10, 2), $24::NUMERIC(5, 2), $25::NUMERIC(5, 2), $26::UUID) RETURNING establishments.created_at, establishments.updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00099s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), 'Advanced Barbershop', 'advanced-barbershop-7', 'barbershop', None, 'Feature St', 'São Paulo', 'SP', None, None, None, '+551177777777', None, None, None, None, None, '{"mon": {"open": "00:00", "close": "23:59"}, "tue": {"open": "00:00", "close": "23:59"}, "wed": {"open": "00:00", "close": "23:59"}, "thu": {"open":  ... (10 characters truncated) ... close": "23:59"}, "fri": {"open": "00:00", "close": "23:59"}, "sat": {"open": "00:00", "close": "23:59"}, "sun": {"open": "00:00", "close": "23:59"}}', False, 'pending', 'trial', None, 0.0, 50.0, 0.0, UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'))
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00045s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.220875Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m108.74[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/establishments[0m [36mrequest_id[0m=[35m963907d4-ce86-4982-a4a7-4f6c84f4a777[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1138s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00053s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO staff_members (establishment_id, user_id, name, phone, role, avatar_url, work_schedule, commission_rate, active, id) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON, $8::NUMERIC(5, 2), $9::BOOLEAN, $10::UUID) RETURNING staff_members.created_at, staff_members.updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00050s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), None, 'Expert Barber', None, 'barber', None, '{"mon": {"open": "00:00", "close": "23:59"}, "tue": {"open": "00:00", "close": "23:59"}, "wed": {"open": "00:00", "close": "23:59"}, "thu": {"open":  ... (10 characters truncated) ... close": "23:59"}, "fri": {"open": "00:00", "close": "23:59"}, "sat": {"open": "00:00", "close": "23:59"}, "sun": {"open": "00:00", "close": "23:59"}}', None, True, UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'))
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00057s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.435645Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m211.58[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/establishments/540e0c78-4591-4cdd-a5f0-215309dbe505/staff[0m [36mrequest_id[0m=[35mfd3fe682-0e92-4a9c-947e-addb82c3a341[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.326s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.2045s ago] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO services (establishment_id, name, description, price, duration_minutes, active, sort_order, deposit_required, id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::NUMERIC(10, 2), $5::INTEGER, $6::BOOLEAN, $7::INTEGER, $8::BOOLEAN, $9::UUID) RETURNING services.created_at, services.updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00072s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), 'Luxury Cut', None, 100.0, 60, True, 0, True, UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'))
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00048s] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.479189Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m40.03[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/establishments/540e0c78-4591-4cdd-a5f0-215309dbe505/services[0m [36mrequest_id[0m=[35m3216fb28-e46f-403e-8fd0-1d75e59038f3[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:1846 select pg_catalog.version()
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 select current_schema()
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 show standard_conforming_strings
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00039s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00047s] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00089s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00036s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT staff_blocks.staff_id, staff_blocks.start_at, staff_blocks.end_at, staff_blocks.reason, staff_blocks.id, staff_blocks.created_at, staff_blocks.updated_at 
FROM staff_blocks 
WHERE staff_blocks.staff_id = $1::UUID AND staff_blocks.start_at < $2::TIMESTAMP WITH TIME ZONE AND staff_blocks.end_at > $3::TIMESTAMP WITH TIME ZONE
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00045s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), datetime.datetime(2026, 2, 7, 16, 50, 11, 481585), datetime.datetime(2026, 2, 7, 15, 50, 11, 481585))
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.staff_id = $1::UUID AND appointments.status != $2::appointmentstatus AND appointments.scheduled_at < $3::TIMESTAMP WITH TIME ZONE
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00062s] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), 'cancelled', datetime.datetime(2026, 2, 7, 16, 50, 11, 481585))
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO appointments (user_id, establishment_id, staff_id, service_id, bundle_id, subscription_id, scheduled_at, duration_minutes, status, payment_type, notes, cancel_reason, total_price, id) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::UUID, $7::TIMESTAMP WITH TIME ZONE, $8::INTEGER, $9::appointmentstatus, $10::paymenttype, $11::VARCHAR, $12::VARCHAR, $13::NUMERIC(10, 2), $14::UUID) RETURNING appointments.created_at, appointments.updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00059s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'), None, None, datetime.datetime(2026, 2, 7, 15, 50, 11, 481585), 60, 'awaiting_deposit', 'single', None, None, 100.0, UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'))
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00055s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT appointment_products.appointment_id AS appointment_products_appointment_id, appointment_products.product_id AS appointment_products_product_id, appointment_products.quantity AS appointment_products_quantity, appointment_products.unit_price AS appointment_products_unit_price, appointment_products.id AS appointment_products_id, appointment_products.created_at AS appointment_products_created_at, appointment_products.updated_at AS appointment_products_updated_at 
FROM appointment_products 
WHERE appointment_products.appointment_id IN ($1::UUID)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00108s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.747710Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m265.43[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments[0m [36mrequest_id[0m=[35m52ced521-9c7c-408a-9f1a-b88b7dda5faa[0m [36mstatus_code[0m=[35m201[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1969s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00053s] (UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.id AS establishments_id, establishments.owner_id AS establishments_owner_id, establishments.name AS establishments_name, establishments.slug AS establishments_slug, establishments.category AS establishments_category, establishments.description AS establishments_description, establishments.address AS establishments_address, establishments.city AS establishments_city, establishments.state AS establishments_state, establishments.zip_code AS establishments_zip_code, establishments.latitude AS establishments_latitude, establishments.longitude AS establishments_longitude, establishments.phone AS establishments_phone, establishments.whatsapp AS establishments_whatsapp, establishments.logo_url AS establishments_logo_url, establishments.cover_url AS establishments_cover_url, establishments.google_place_id AS establishments_google_place_id, establishments.google_maps_url AS establishments_google_maps_url, establishments.business_hours AS establishments_business_hours, establishments.queue_mode_enabled AS establishments_queue_mode_enabled, establishments.status AS establishments_status, establishments.subscription_tier AS establishments_subscription_tier, establishments.stripe_account_id AS establishments_stripe_account_id, establishments.cancellation_fee_fixed AS establishments_cancellation_fee_fixed, establishments.no_show_fee_percent AS establishments_no_show_fee_percent, establishments.deposit_percent AS establishments_deposit_percent, establishments.created_at AS establishments_created_at, establishments.updated_at AS establishments_updated_at 
FROM establishments 
WHERE establishments.id IN ($1::UUID)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00063s] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE appointments SET status=$1::appointmentstatus, updated_at=now() WHERE appointments.id = $2::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00046s] ('no_show', UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'))
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO user_debts (user_id, establishment_id, appointment_id, amount, status, id) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::NUMERIC(10, 2), $5::debtstatus, $6::UUID) RETURNING user_debts.created_at, user_debts.updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00057s] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'), UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'), UUID('b3adb854-ce8a-41f3-b3b2-83facdd15159'), 50.0, 'pending', UUID('5cdf44aa-177a-4fcb-ada4-bb766b6b04e5'))
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.814164Z[0m [[32m[1minfo     [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m62.94[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments/b3adb854-ce8a-41f3-b3b2-83facdd15159/no-show[0m [36mrequest_id[0m=[35m8adbd3ee-06a2-414b-963a-42a4337a2d10[0m [36mstatus_code[0m=[35m200[0m [36mversion[0m=[35m1.0.0[0m
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.phone, users.name, users.email, users.avatar_url, users.role, users.referral_code, users.referred_by_id, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.265s ago] (UUID('1bec427c-d8f4-47f8-963a-f2dcba2a6133'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT services.establishment_id, services.name, services.description, services.price, services.duration_minutes, services.active, services.sort_order, services.deposit_required, services.id, services.created_at, services.updated_at 
FROM services 
WHERE services.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.2154s ago] (UUID('ac3eebce-6fbf-48b2-b2f1-1593f1794a20'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT staff_members.establishment_id, staff_members.user_id, staff_members.name, staff_members.phone, staff_members.role, staff_members.avatar_url, staff_members.work_schedule, staff_members.commission_rate, staff_members.active, staff_members.id, staff_members.created_at, staff_members.updated_at 
FROM staff_members 
WHERE staff_members.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.2174s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT establishments.owner_id, establishments.name, establishments.slug, establishments.category, establishments.description, establishments.address, establishments.city, establishments.state, establishments.zip_code, establishments.latitude, establishments.longitude, establishments.phone, establishments.whatsapp, establishments.logo_url, establishments.cover_url, establishments.google_place_id, establishments.google_maps_url, establishments.business_hours, establishments.queue_mode_enabled, establishments.status, establishments.subscription_tier, establishments.stripe_account_id, establishments.cancellation_fee_fixed, establishments.no_show_fee_percent, establishments.deposit_percent, establishments.id, establishments.created_at, establishments.updated_at 
FROM establishments 
WHERE establishments.id = $1::UUID
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.2112s ago] (UUID('540e0c78-4591-4cdd-a5f0-215309dbe505'),)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT staff_blocks.staff_id, staff_blocks.start_at, staff_blocks.end_at, staff_blocks.reason, staff_blocks.id, staff_blocks.created_at, staff_blocks.updated_at 
FROM staff_blocks 
WHERE staff_blocks.staff_id = $1::UUID AND staff_blocks.start_at < $2::TIMESTAMP WITH TIME ZONE AND staff_blocks.end_at > $3::TIMESTAMP WITH TIME ZONE
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1899s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), datetime.datetime(2026, 2, 8, 16, 50, 11, 816464), datetime.datetime(2026, 2, 8, 15, 50, 11, 816464))
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT appointments.user_id, appointments.establishment_id, appointments.staff_id, appointments.service_id, appointments.bundle_id, appointments.subscription_id, appointments.scheduled_at, appointments.duration_minutes, appointments.status, appointments.payment_type, appointments.notes, appointments.cancel_reason, appointments.total_price, appointments.id, appointments.created_at, appointments.updated_at 
FROM appointments 
WHERE appointments.staff_id = $1::UUID AND appointments.status != $2::appointmentstatus AND appointments.scheduled_at < $3::TIMESTAMP WITH TIME ZONE
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.1835s ago] (UUID('43a9fbb6-5a79-4e4a-98e4-3bdc8e63fcee'), 'cancelled', datetime.datetime(2026, 2, 8, 16, 50, 11, 816464))
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
ERROR    app.core.middleware:middleware.py:104 [2m2026-02-05T14:50:11.860122Z[0m [[31m[1merror    [0m] [1mUnhandled exception           [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36merror[0m=[35m"can't compare offset-naive and offset-aware datetimes"[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments[0m [36mrequest_id[0m=[35m5cdcdb63-c98d-4d30-9975-c0f13c782abc[0m [36mversion[0m=[35m1.0.0[0m
  + Exception Group Traceback (most recent call last):
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    |     appointment = await service.create(current_user.id, data)
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    |     if c.scheduled_at < appt_end and c_end > appt_start:
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: can't compare offset-naive and offset-aware datetimes
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    appointment = await service.create(current_user.id, data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    if c.scheduled_at < appt_end and c_end > appt_start:
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can't compare offset-naive and offset-aware datetimes
  + Exception Group Traceback (most recent call last):
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    |     appointment = await service.create(current_user.id, data)
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    |     if c.scheduled_at < appt_end and c_end > appt_start:
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: can't compare offset-naive and offset-aware datetimes
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 78, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/core/middleware.py", line 175, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/api/v1/appointments.py", line 68, in create_appointment
    appointment = await service.create(current_user.id, data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/projetos/navaro/packages/api/app/services/appointment_service.py", line 144, in create
    if c.scheduled_at < appt_end and c_end > appt_start:
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can't compare offset-naive and offset-aware datetimes
ERROR    app.core.middleware:middleware.py:56 [2m2026-02-05T14:50:11.874234Z[0m [[31m[1merror    [0m] [1mRequest completed             [0m [[0m[1m[34mapp.core.middleware[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36mduration_ms[0m=[35m56.91[0m [36menvironment[0m=[35mdevelopment[0m [36mmethod[0m=[35mPOST[0m [36mmode[0m=[35mdebug[0m [36mpath[0m=[35m/api/v1/appointments[0m [36mrequest_id[0m=[35m5cdcdb63-c98d-4d30-9975-c0f13c782abc[0m [36mstatus_code[0m=[35m500[0m [36mversion[0m=[35m1.0.0[0m
---------------------------- Captured log teardown -----------------------------
INFO     app.main:main.py:42 [2m2026-02-05T14:50:11.991413Z[0m [[32m[1minfo     [0m] [1mShutting down application     [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mversion[0m=[35m1.0.0[0m
INFO     app.main:main.py:44 [2m2026-02-05T14:50:12.004241Z[0m [[32m[1minfo     [0m] [1mDatabase connections closed   [0m [[0m[1m[34mapp.main[0m][0m [36mapp[0m=[35m'Navaro API'[0m [36menvironment[0m=[35mdevelopment[0m [36mmode[0m=[35mdebug[0m [36mversion[0m=[35m1.0.0[0m
=============================== warnings summary ===============================
venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /root/projetos/navaro/packages/api/venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

app/api/v1/users.py:16
  /root/projetos/navaro/packages/api/app/api/v1/users.py:16: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserResponse(BaseModel):

app/api/v1/establishments.py:65
  /root/projetos/navaro/packages/api/app/api/v1/establishments.py:65: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EstablishmentResponse(BaseModel):

app/api/v1/services.py:40
  /root/projetos/navaro/packages/api/app/api/v1/services.py:40: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ServiceResponse(BaseModel):

app/api/v1/staff.py:41
  /root/projetos/navaro/packages/api/app/api/v1/staff.py:41: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class StaffResponse(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/api/v1/test_advanced_payments.py::test_no_show_and_wallet_flow
1 failed, 5 warnings in 1.44s
